<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WhiteBoard.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/ChatBoard.html">ChatBoard</a></li>
                                <li><a href="../classes/ChatBoardForRecord.html">ChatBoardForRecord</a></li>
                                <li><a href="../classes/CodeEditor.html">CodeEditor</a></li>
                                <li><a href="../classes/FileDisplay.html">FileDisplay</a></li>
                                <li><a href="../classes/FileDisplayForRecord.html">FileDisplayForRecord</a></li>
                                <li><a href="../classes/HomePage.html">HomePage</a></li>
                                <li><a href="../classes/HomePageHeader.html">HomePageHeader</a></li>
                                <li><a href="../classes/LivePage.html">LivePage</a></li>
                                <li><a href="../classes/LivePicture.html">LivePicture</a></li>
                                <li><a href="../classes/LiveRoom.html">LiveRoom</a></li>
                                <li><a href="../classes/Login.html">Login</a></li>
                                <li><a href="../classes/PageFooter.html">PageFooter</a></li>
                                <li><a href="../classes/RecordPage.html">RecordPage</a></li>
                                <li><a href="../classes/RecordPicture.html">RecordPicture</a></li>
                                <li><a href="../classes/RecordRoom.html">RecordRoom</a></li>
                                <li><a href="../classes/Reset.html">Reset</a></li>
                                <li><a href="../classes/SignUp.html">SignUp</a></li>
                                <li><a href="../classes/TeachingTools.html">TeachingTools</a></li>
                                <li><a href="../classes/VideoDisplay.html">VideoDisplay</a></li>
                                <li><a href="../classes/WhiteBoard.html">WhiteBoard</a></li>
                                <li><a href="../classes/WhiteBoardForRecord.html">WhiteBoardForRecord</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ChatBoard.html">ChatBoard</a></li>
                                <li><a href="../modules/ChatBoardForRecord.html">ChatBoardForRecord</a></li>
                                <li><a href="../modules/CodeEditor.html">CodeEditor</a></li>
                                <li><a href="../modules/FileDisplay.html">FileDisplay</a></li>
                                <li><a href="../modules/FileDisplayForRecord.html">FileDisplayForRecord</a></li>
                                <li><a href="../modules/HomePage.html">HomePage</a></li>
                                <li><a href="../modules/HomePageHeader.html">HomePageHeader</a></li>
                                <li><a href="../modules/LivePage.html">LivePage</a></li>
                                <li><a href="../modules/LivePicture.html">LivePicture</a></li>
                                <li><a href="../modules/LiveRoom.html">LiveRoom</a></li>
                                <li><a href="../modules/Login.html">Login</a></li>
                                <li><a href="../modules/PageFooter.html">PageFooter</a></li>
                                <li><a href="../modules/RecordPage.html">RecordPage</a></li>
                                <li><a href="../modules/RecordPicture.html">RecordPicture</a></li>
                                <li><a href="../modules/RecordRoom.html">RecordRoom</a></li>
                                <li><a href="../modules/Reset.html">Reset</a></li>
                                <li><a href="../modules/SignUp.html">SignUp</a></li>
                                <li><a href="../modules/TeachingTools.html">TeachingTools</a></li>
                                <li><a href="../modules/VideoDisplay.html">VideoDisplay</a></li>
                                <li><a href="../modules/WhiteBoard.html">WhiteBoard</a></li>
                                <li><a href="../modules/WhiteBoardForRecord.html">WhiteBoardForRecord</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: WhiteBoard.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&lt;template&gt;
    &lt;div class=&quot;white-board&quot;&gt;
        &lt;div class=&quot;tools&quot;&gt;
            &lt;Button type=&quot;text&quot; @click=&quot;clear&quot;&gt;清空&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; @click=&quot;undo&quot;&gt;撤销&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: type === &#x27;eraser&#x27; }&quot; @click=&quot;clickEraser&quot;&gt;橡皮擦&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: type === &#x27;pen&#x27; }&quot; @click=&quot;clickPen&quot;&gt;画笔&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: type === &#x27;text&#x27; }&quot; @click=&quot;clickText&quot;&gt;文字&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: type === &#x27;line&#x27; }&quot; @click=&quot;clickLine&quot;&gt;直线&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: type === &#x27;rectangle&#x27; }&quot; @click=&quot;clickRectangle&quot;&gt;矩形&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: type === &#x27;circle&#x27; }&quot; @click=&quot;clickCircle&quot;&gt;圆形&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: type === &#x27;ellipse&#x27; }&quot; @click=&quot;clickEllipse&quot;&gt;椭圆&lt;/Button&gt;
            &lt;Dropdown class=&quot;change-size&quot; placement=&quot;right-start&quot; @on-click=&quot;changeSize&quot;&gt;
                &lt;Button type=&quot;text&quot;&gt;
                    粗细
                    &lt;Icon type=&quot;ios-arrow-forward&quot;&gt;&lt;/Icon&gt;
                &lt;/Button&gt;
                &lt;Dropdown-menu slot=&quot;list&quot; v-if=&quot;this.teacherName === this.username&quot;&gt;
                    &lt;Dropdown-item name=&#x27;small&#x27;&gt;小&lt;/Dropdown-item&gt;
                    &lt;/Dropdown-item&gt;
                    &lt;Dropdown-item name=&#x27;middle&#x27;&gt;中&lt;/Dropdown-item&gt;
                    &lt;Dropdown-item name=&#x27;large&#x27;&gt;大&lt;/Dropdown-item&gt;
                &lt;/Dropdown-menu&gt;
            &lt;/Dropdown&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: border === true }&quot; @click=&quot;clickBorder&quot;&gt;边框&lt;/Button&gt;
            &lt;Button type=&quot;text&quot; :class=&quot;{ active: fill === true }&quot; @click=&quot;clickFill&quot;&gt;填充&lt;/Button&gt;
            &lt;el-color-picker v-if=&quot;this.teacherName === this.username&quot; class=&quot;color-selected&quot; v-model=&quot;colorBorder&quot; show-alpha&gt;&lt;/el-color-picker&gt;
            &lt;el-color-picker v-if=&quot;this.teacherName === this.username&quot; class=&quot;color-selected&quot; v-model=&quot;colorFill&quot; show-alpha&gt;&lt;/el-color-picker&gt;
        &lt;/div&gt;
        &lt;div class=&quot;drawing-board&quot;&gt;
            &lt;input id=&quot;text-field&quot; @keyup.enter=&quot;drawText&quot; v-show=&quot;this.textField === true&quot; v-model=&quot;textInput&quot; placeholder=&quot;请输入...&quot; autofocus=&quot;true&quot;&gt;&lt;/input&gt;
            &lt;canvas ref=&quot;board&quot; id=&quot;canvas&quot; :width=&quot;teachingToolsWidth&quot; :height=&quot;teachingToolsHeight&quot;&gt;&lt;/canvas&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
/**
 * 实现教学区白板功能，
 * 作为子组件插入直播间页面。
 * 老师端可以对白板进行操作，
 * 可以选择画笔、直线、几何图形等进行画图，
 * 有填充、大小选择、橡皮擦、撤销等功能。
 * 学生端不能对白板操作，
 * 只能同步看到老师的操作。
 *
 * @module WhiteBoard
 * @class WhiteBoard
 */
import * as io from &#x27;socket.io-client&#x27;
import myMsg from &#x27;./../warning.js&#x27;
/**
 * 用于判断鼠标在画图过程中是否移出canvas
 *
 * @attribute MIN
 * @readOnly
 * @default 0.005
 * @type Number
 */
const MIN = 0.005
export default {
    name: &#x27;white-board&#x27;,
    /**
     * 表示房间ID号
     *
     * @property roomId
     * @type String
     */

    /**
     * 表示创建该房间的老师名字
     *
     * @property teacherName
     * @type String
     */

    /**
     * 表示进入该房间的用户名字
     *
     * @property username
     * @type String
     */

    /**
     * 表示白板区域的宽，根据父组件大小动态变化
     *
     * @property teachingToolsWidth
     * @type Number
     */

    /**
     * 表示白板区域的长，根据父组件大小动态变化
     *
     * @property teachingToolsHeight
     * @type Number
     */
    props: [&#x27;roomId&#x27;, &#x27;teacherName&#x27;, &#x27;username&#x27;, &#x27;teachingToolsWidth&#x27;, &#x27;teachingToolsHeight&#x27;],
    data: function () {
        return {
            /**
             * 表示当前老师选中的绘图功能
             *
             * @attribute type
             * @type String
             * @default &#x27;pen&#x27;
             */
            type: &#x27;pen&#x27;,
            /**
             * 获取canvas的上下文，指代页面上的绘图区域，
             * 用于对白板操作。
             *
             * @attribute context
             * @type null
             */
            context: null,
            /**
             * 表示绘图过程中（mousemove时）上一次鼠标的位置，
             * 在没有画图操作的时候为空。
             *
             * @attribute originPoint
             * @type null
             */
            originPoint: null,
            /**
             * 表示绘图过程中（mousemove时）上一次操作的绘图结果，
             * 在没有画图操作的时候为空。
             *
             * @attribute lastImageData
             * @type null
             */
            lastImageData: null,
            /**
             * 表示画板上边框的颜色（第一个颜色选择器）
             *
             * @attribute colorBorder
             * @type String
             * @default &#x27;rgba(0, 0, 0, 1)&#x27;
             */
            colorBorder: &#x27;rgba(0, 0, 0, 1)&#x27;,
            /**
             * 表示画板上填充的颜色（第二个颜色选择器）
             *
             * @attribute colorFill
             * @type String
             * @default &#x27;rgba(255, 255, 255, 1)&#x27;
             */
            colorFill: &#x27;rgba(255, 255, 255, 1)&#x27;,
            /**
             * 表示是否选择&quot;填充&quot;按钮
             *
             * @attribute fill
             * @type Boolean
             * @default false
             */
            fill: false,
            /**
             * 表示是否选择&quot;边框&quot;按钮
             *
             * @attribute border
             * @type Boolean
             * @default true
             */
            border: true,
            /**
             * 表示是否选择粗细的大小
             *
             * @attribute size
             * @type Number
             * @default 1
             */
            size: 1,
            /**
             * 表示文本输入框是否显示
             *
             * @attribute textField
             * @type Boolean
             * @default false
             */
            textField: false,
            /**
             * 表示文本输入框中输入的文字
             *
             * @attribute textInput
             * @type String
             * @default &#x27;&#x27;
             */
            textInput: &#x27;&#x27;,
            /**
             * 表示绘制文字时文字起始位置的横坐标
             *
             * @attribute textLeft
             * @type Number
             * @default 0
             */
            textLeft: 0,
            /**
             * 表示绘制文字时文字起始位置的纵坐标
             *
             * @attribute textTop
             * @type Number
             * @default 0
             */
            textTop: 0,
            /**
             * 指向canvas画板对象
             *
             * @attribute canvas
             * @type null
             */
            canvas: null,
            /**
             * 存储画板上每次操作对应的图片
             *
             * @attribute allDataUrl
             * @type Array
             */
            allDataUrl: [],
            /**
             * 表示一个指针，指向allDataUrl中当前画板的状态，
             * 在undo操作时前移一个，从而实现undo操作。
             *
             * @attribute pointer
             * @type Number
             * @default 0
             */
            pointer: 0,
            /**
             * 表示客户端，监听服务器传来的消息
             *
             * @attribute socket
             * @type Object
             * @default &#x27;&#x27;
             */
            socket: &#x27;&#x27;,
            /**
             * 表示老师是否选择开始直播，
             * 在直播前，即started值为false时不能对白板区域进行任何操作。
             *
             * @attribute started
             * @type Boolean
             * @default false
             */
            started: false
        }
    },
    watch: {
        type: function () {
            if (this.type === &#x27;eraser&#x27;) {
                this.changeEraserCursor()
            } else if (this.type === &#x27;pen&#x27;) {
                this.canvas.style.cursor = &#x27;default&#x27;
            } else {
                this.canvas.style.cursor = &#x27;crosshair&#x27;
            }
        },
        size: function () {
            if (this.type === &#x27;eraser&#x27;) {
                this.changeEraserCursor()
            }
        }
    },
    /**
     * mounted函数，初始化数据，客户端监听服务器消息
     *
     * @method mounted
     */
    mounted: function () {
        [&#x27;mousemove&#x27;, &#x27;mousedown&#x27;, &#x27;mouseup&#x27;].map((eventName) =&gt; {
            this.$refs.board.addEventListener(eventName, ({ offsetX: x, offsetY: y, buttons }) =&gt; {
                this[&#x60;${this.type}Command&#x60;](eventName, { x, y, buttons })
            })
        })
        this.initData()
        let self = this
        self.socket.on(&#x27;message&#x27;, function (data) {
            if (self.started === false) {
                return
            }
            self.whiteBoardDoing(data)
        })
        self.socket.on(&#x27;click&#x27;, function (data) {
            if (self.started === false) {
                return
            }
            self.buttonDoing(data)
        })
        self.socket.on(&#x27;newJoin&#x27;, function () {
            self.joinDoing()
        })
        self.socket.on(&#x27;updateWhiteBoardMessage&#x27;, function (data) {
            self.updateMessageDoing(data)
        })
        self.socket.on(&#x27;getStarted&#x27;, function () {
            self.started = true
        })
    },
    methods: {
        /**
         * 初始化数据，在mounted中调用
         *
         * @method initData
         */
        initData: function () {
            this.context = this.$refs.board.getContext(&#x27;2d&#x27;)
            this.canvas = document.getElementById(&#x27;canvas&#x27;)
            this.canvas.style.cursor = &#x27;default&#x27;
            this.allDataUrl.push(this.canvas.toDataURL())
            this.socket = io.connect(&#x27;http://localhost:9000&#x27;)
            this.socket.emit(&#x27;joinForWhiteBoard&#x27;, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 当选择功能为橡皮擦且size值变化时调用，
         * 根据size的值改变橡皮擦光标的样式
         *
         * @method changeEraserCursor
         */
        changeEraserCursor: function () {
            if (this.size === 1) {
                this.canvas.style.cursor = &quot;url(&#x27;http://localhost:8000/static/eraserSmall.png&#x27;), default&quot;
            } else if (this.size === 3) {
                this.canvas.style.cursor = &quot;url(&#x27;http://localhost:8000/static/eraserMiddle.png&#x27;), default&quot;
            } else {
                this.canvas.style.cursor = &quot;url(&#x27;http://localhost:8000/static/eraserLarge.png&#x27;), default&quot;
            }
        },
        /**
         * 将用户输入到文本输入框中的文字画到白板上，
         * 并且可以根据白板大小自动换行
         *
         * @method drawLongText
         * @param text 用户输入的文字
         * @param beginX 输入文字坐标点的横坐标
         * @param beginY 输入文字坐标点的纵坐标
         */
        drawLongText: function (text, beginX, beginY) {
            let textLength = text.length
            let rowLength = this.teachingToolsWidth - beginX
            let newText = text.split(&#x27;&#x27;)
            let rowText = &#x27;&#x27;
            let count = 0
            this.context.textAlign = &#x27;left&#x27;
            for (let i = 0; i &lt;= textLength; i++) {
                if (i === textLength) {
                    this.context.fillText(rowText, beginX, beginY)
                }
                if (count &lt;= rowLength &amp;&amp; (count + this.context.measureText(newText[0]).width &gt; rowLength)) {
                    this.context.fillText(rowText, beginX, beginY)
                    beginY = beginY + this.size * 5 + 28
                    rowText = &#x27;&#x27;
                    count = 0
                }
                rowText = rowText + newText[0]
                count += this.context.measureText(newText[0]).width
                newText.shift()
            }
        },
        /**
         * 用户（创建房间的老师）点击粗细选择大小时触发，
         * 箱服务器发送click消息，data中包含&quot;size&quot;的信息
         *
         * @method changeSize
         */
        changeSize: function (name) {
            if (this.teacherName !== this.username) {
                return
            }
            if (name === &#x27;large&#x27;) {
                this.socket.emit(&#x27;click&#x27;, { type: &#x27;sizeLarge&#x27; }, this.roomId + &#x27;.0&#x27;)
            } else if (name === &#x27;middle&#x27;) {
                this.socket.emit(&#x27;click&#x27;, { type: &#x27;sizeMiddle&#x27; }, this.roomId + &#x27;.0&#x27;)
            } else {
                this.socket.emit(&#x27;click&#x27;, { type: &#x27;sizeSmall&#x27; }, this.roomId + &#x27;.0&#x27;)
            }
        },
        /**
         * 用户（创建房间的老师）点击橡皮擦按钮时触发，
         * 向服务器发送click消息，data中包含&quot;橡皮擦&quot;信息
         *
         * @method clickEraser
         */
        clickEraser: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;eraser&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击画笔按钮时触发，
         * 向服务器发送click消息，data中包含&quot;画笔&quot;信息
         *
         * @method clickPen
         */
        clickPen: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;pen&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击文字按钮时触发，
         * 向服务器发送click消息，data中包含&quot;文字&quot;信息
         *
         * @method clickPen
         */
        clickText: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;text&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击直线按钮时触发，
         * 向服务器发送click消息，data中包含&quot;直线&quot;信息
         *
         * @method clickLine
         */
        clickLine: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;line&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击矩形按钮时触发，
         * 向服务器发送click消息，data中包含&quot;矩形&quot;信息
         *
         * @method clickRectangle
         */
        clickRectangle: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;rectangle&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击圆形按钮时触发，
         * 向服务器发送click消息，data中包含&quot;圆形&quot;信息
         *
         * @method clickCircle
         */
        clickCircle: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;circle&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击椭圆按钮时触发，
         * 向服务器发送click消息，data中包含&quot;椭圆&quot;信息
         *
         * @method clickEllipse
         */
        clickEllipse: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;ellipse&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击边框按钮时触发，
         * 向服务器发送click消息，data中包含&quot;边框&quot;信息
         *
         * @method clickBorder
         */
        clickBorder: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;border&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）点击填充按钮时触发，
         * 向服务器发送click消息，data中包含&quot;填充&quot;信息
         *
         * @method clickFill
         */
        clickFill: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;click&#x27;, { type: &#x27;fill&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）在文本框输入文字后按下回车键是响应，
         * 向服务器发送&#x27;message&#x27;消息，包含输入的文字信息
         *
         * @method drawText
         */
        drawText: function () {
            if (this.teacherName !== this.username) {
                return
            }
            let input = this.textInput
            this.socket.emit(&#x27;message&#x27;, {
                type: &#x27;drawText&#x27;,
                input: input
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）按下清空按钮时响应，
         * 向服务器发送&#x27;message&#x27;消息，包含&quot;清空&quot;信息
         *
         * @method clear
         */
        clear: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, { type: &#x27;clear&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）按下撤销按钮时响应，
         * 向服务器发送&#x27;message&#x27;消息，包含&quot;撤销&quot;信息
         *
         * @method undo
         */
        undo: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, { type: &#x27;undo&#x27; }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）使用画笔功能对白板进行操作的时候响应，
         * 向服务器发送操作的数据
         *
         * @method penCommand
         * @param action 表示鼠标事件，包括mousedown、mousemove、mouseup
         * @param { x, y, buttons} 其中x、y表示当前鼠标在白板上的坐标
         */
        penCommand: function (action, { x, y, buttons }) {
            if (this.teacherName !== this.username) {
                return
            }
            if (action === &#x27;mousemove&#x27; &amp;&amp; this.originPoint === null) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, {
                type: &#x27;pen&#x27;,
                action: action,
                x: x / this.teachingToolsWidth,
                y: y / this.teachingToolsHeight,
                buttons: buttons,
                color: this.colorBorder
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）使用文字功能对白板进行操作的时候响应，
         * 向服务器发送操作的数据（在mouseup的时候响应）
         *
         * @method textCommand
         * @param action 表示鼠标事件，包括mousedown、mousemove、mouseup
         * @param { x, y, buttons} 其中x、y表示当前鼠标在白板上的坐标
         */
        textCommand: function (action, { x, y, buttons }) {
            if (this.teacherName !== this.username) {
                return
            }
            if (action === &#x27;mouseup&#x27;) {
                this.textField = true
                let textField = document.getElementById(&#x27;text-field&#x27;)
                textField.style.autofocus = &#x27;true&#x27;
                this.socket.emit(&#x27;message&#x27;, {
                    type: &#x27;textField&#x27;,
                    x: x / this.teachingToolsWidth,
                    y: y / this.teachingToolsHeight,
                    color: this.colorBorder,
                    action: action,
                    buttons: buttons
                }, this.roomId + &#x27;.0&#x27;)
            }
        },
        /**
         * 用户（创建房间的老师）使用橡皮擦功能对白板进行操作的时候响应，
         * 向服务器发送操作的数据
         *
         * @method eraserCommand
         * @param action 表示鼠标事件，包括mousedown、mousemove、mouseup
         * @param { x, y, buttons} 其中x、y表示当前鼠标在白板上的坐标
         */
        eraserCommand: function (action, { x, y, buttons }) {
            if (this.teacherName !== this.username) {
                return
            }
            if (action === &#x27;mousemove&#x27; &amp;&amp; this.originPoint === null) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, {
                type: &#x27;eraser&#x27;,
                action: action,
                x: x / this.teachingToolsWidth,
                y: y / this.teachingToolsHeight,
                buttons: buttons
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）使用直线功能对白板进行操作的时候响应，
         * 向服务器发送操作的数据
         *
         * @method lineCommand
         * @param action 表示鼠标事件，包括mousedown、mousemove、mouseup
         * @param { x, y, buttons} 其中x、y表示鼠标在白板上的坐标
         */
        lineCommand: function (action, { x, y, buttons }) {
            if (this.teacherName !== this.username) {
                return
            }
            if (action === &#x27;mousemove&#x27; &amp;&amp; this.originPoint === null) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, {
                type: &#x27;line&#x27;,
                action: action,
                x: x / this.teachingToolsWidth,
                y: y / this.teachingToolsHeight,
                buttons: buttons,
                color: this.colorBorder
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）使用画矩形功能对白板进行操作的时候响应，
         * 向服务器发送操作的数据
         *
         * @method rectangleCommand
         * @param action 表示鼠标事件，包括mousedown、mousemove、mouseup
         * @param { x, y, buttons} 其中x、y表示鼠标在白板上的坐标
         */
        rectangleCommand: function (action, { x, y, buttons }) {
            if (this.teacherName !== this.username) {
                return
            }
            if (action === &#x27;mousemove&#x27; &amp;&amp; this.originPoint === null) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, {
                type: &#x27;rectangle&#x27;,
                action: action,
                x: x / this.teachingToolsWidth,
                y: y / this.teachingToolsHeight,
                buttons: buttons,
                colorBorder: this.colorBorder,
                colorFill: this.colorFill,
                fill: this.fill
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）使用画圆功能对白板进行操作的时候响应，
         * 向服务器发送操作的数据
         *
         * @method circleCommand
         * @param action 表示鼠标事件，包括mousedown、mousemove、mouseup
         * @param { x, y, buttons} 其中x、y表示鼠标在白板上的坐标
         */
        circleCommand: function (action, { x, y, buttons }) {
            if (this.teacherName !== this.username) {
                return
            }
            if (action === &#x27;mousemove&#x27; &amp;&amp; this.originPoint === null) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, {
                type: &#x27;circle&#x27;,
                action: action,
                x: x / this.teachingToolsWidth,
                y: y / this.teachingToolsHeight,
                buttons: buttons,
                colorBorder: this.colorBorder,
                colorFill: this.colorFill,
                fill: this.fill
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 用户（创建房间的老师）使用画椭圆功能对白板进行操作的时候响应，
         * 向服务器发送操作的数据
         *
         * @method penCommand
         * @param action 表示鼠标事件，包括mousedown、mousemove、mouseup
         * @param { x, y, buttons} 其中x、y表示鼠标在白板上的坐标
         */
        ellipseCommand: function (action, { x, y, buttons }) {
            if (this.teacherName !== this.username) {
                return
            }
            if (action === &#x27;mousemove&#x27; &amp;&amp; this.originPoint === null) {
                return
            }
            this.socket.emit(&#x27;message&#x27;, {
                type: &#x27;ellipse&#x27;,
                action: action,
                x: x / this.teachingToolsWidth,
                y: y / this.teachingToolsHeight,
                buttons: buttons,
                colorBorder: this.colorBorder,
                colorFill: this.colorFill,
                fill: this.fill
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 根据接收到的信息对画板进行画笔操作
         *
         * @method pen
         * @param data 从服务器接收到的信息，包含对画板操作的数据
         */
        pen: function (data) {
            this.colorBorder = data.color
            if (data.action === &#x27;mousedown&#x27;) {
                this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
                this.lastImageData = this.context.getImageData(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
            } else if (data.action === &#x27;mousemove&#x27;) {
                this.penMousemove(data)
            } else if (data.action === &#x27;mouseup&#x27;) {
                this.originPoint = null
                this.lastImageData = null
                this.pointer += 1
                this.allDataUrl.push(this.canvas.toDataURL())
            }
        },
        /**
         * 当从服务器接收到的信息是画笔操作，且鼠标事件为mousemove时调用。
         *
         * @method penMousemove
         * @param data 从服务器接收的信息，包括对画板进行操作的数据
         */
        penMousemove: function (data) {
            if (this.originPoint === null) {
                return
            }
            if (data.x &lt; MIN || data.x &gt; (1 - MIN) || data.y &lt; MIN || data.y &gt; (1 - MIN)) {
                this.originPoint = null
                this.lastImageData = null
                this.pointer += 1
                this.allDataUrl.push(this.canvas.toDataURL())
                return
            }
            const context = this.context
            const [ox, oy] = this.originPoint
            context.strokeStyle = this.colorBorder
            context.lineWidth = this.size
            context.beginPath()
            context.moveTo(ox, oy)
            context.lineTo(data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight)
            context.stroke()
            context.closePath()
            this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
        },
        /**
         * 根据接收到的信息对画板进行橡皮擦操作
         *
         * @method eraser
         * @param data 从服务器接收到的信息，包含对画板操作的数据
         */
        eraser: function (data) {
            switch (data.action) {
                case &#x27;mousedown&#x27;:
                    this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
                    this.lastImageData = this.context.getImageData(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
                    break
                case &#x27;mousemove&#x27;:
                    this.eraserMousemove(data)
                    break
                case &#x27;mouseup&#x27;:
                    this.originPoint = null
                    this.lastImageData = null
                    this.allDataUrl.push(this.canvas.toDataURL())
                    this.pointer += 1
                    break
            }
        },
        /**
         * 当从服务器接收到的信息是橡皮擦操作，且鼠标事件为mousemove时调用。
         *
         * @method eraserMousemove
         * @param data 从服务器接收的信息，包括对画板进行操作的数据
         */
        eraserMousemove: function (data) {
            if (this.originPoint === null) {
                return
            }
            if (data.x &lt; MIN || data.x &gt; (1 - MIN) || data.y &lt; MIN || data.y &gt; (1 - MIN)) {
                this.originPoint = null
                this.lastImageData = null
                this.allDataUrl.push(this.canvas.toDataURL())
                this.pointer += 1
                return
            }
            const context = this.context
            const [ox, oy] = this.originPoint
            context.clearRect(ox, oy, this.size * 10, this.size * 10)
            this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
        },
        /**
         * 根据接收到的信息对画板进行直线操作
         *
         * @method line
         * @param data 从服务器接收到的信息，包含对画板操作的数据
         */
        line: function (data) {
            this.colorBorder = data.color
            switch (data.action) {
                case &#x27;mousedown&#x27;:
                    this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
                    this.lastImageData = this.context.getImageData(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
                    break
                case &#x27;mousemove&#x27;:
                    this.lineMousemove(data)
                    break
                case &#x27;mouseup&#x27;:
                    this.originPoint = null
                    this.lastImageData = null
                    this.allDataUrl.push(this.canvas.toDataURL())
                    this.pointer += 1
                    break
            }
        },
        /**
         * 当从服务器接收到的信息是直线操作，且鼠标事件为mousemove时调用。
         *
         * @method lineMousemove
         * @param data 从服务器接收的信息，包括对画板进行操作的数据
         */
        lineMousemove: function (data) {
            if (this.originPoint == null) {
                return
            }
            if (data.x &lt; MIN || data.x &gt; (1 - MIN) || data.y &lt; MIN || data.y &gt; (1 - MIN)) {
                this.originPoint = null
                this.lastImageData = null
                this.allDataUrl.push(this.canvas.toDataURL())
                this.pointer += 1
                return
            }
            const context = this.context
            context.putImageData(this.lastImageData, 0, 0)
            const [ox, oy] = this.originPoint
            context.strokeStyle = this.colorBorder
            context.lineWidth = this.size
            context.beginPath()
            context.moveTo(ox, oy)
            context.lineTo(data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight)
            context.stroke()
            context.closePath()
        },
        /**
         * 根据接收到的信息对画板进行画矩形操作
         *
         * @method rectangle
         * @param data 从服务器接收到的信息，包含对画板操作的数据
         */
        rectangle: function (data) {
            this.colorBorder = data.colorBorder
            this.colorFill = data.colorFill
            this.fill = data.fill
            switch (data.action) {
                case &#x27;mousedown&#x27;:
                    this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
                    this.lastImageData = this.context.getImageData(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
                    break
                case &#x27;mousemove&#x27;:
                    this.rectangleMousemove(data)
                    break
                case &#x27;mouseup&#x27;:
                    this.originPoint = null
                    this.lastImageData = null
                    this.allDataUrl.push(this.canvas.toDataURL())
                    this.pointer += 1
                    break
            }
        },
        /**
         * 当从服务器接收到的信息是画矩形操作，且鼠标事件为mousemove时调用。
         *
         * @method rectangleMousemove
         * @param data 从服务器接收的信息，包括对画板进行操作的数据
         */
        rectangleMousemove: function (data) {
            // TODO:拆分函数
            if (this.originPoint === null) {
                return
            }
            if (data.x &lt; MIN || data.x &gt; (1 - MIN) || data.y &lt; MIN || data.y &gt; (1 - MIN)) {
                this.originPoint = null
                this.lastImageData = null
                this.allDataUrl.push(this.canvas.toDataURL())
                this.pointer += 1
                return
            }
            const context = this.context
            context.putImageData(this.lastImageData, 0, 0)
            const [ox, oy] = this.originPoint
            const [dx, dy] = [data.x * this.teachingToolsWidth - ox, data.y * this.teachingToolsHeight - oy]
            context.lineWidth = this.size
            context.beginPath()
            context.rect(ox, oy, dx, dy)
            if (this.fill === true) {
                context.fillStyle = this.colorFill
                context.fill()
            }
            if (this.border === true) {
                context.strokeStyle = this.colorBorder
                context.stroke()
            }
            context.closePath()
        },
        /**
         * 根据接收到的信息对画板进行画圆形操作
         *
         * @method circle
         * @param data 从服务器接收到的信息，包含对画板操作的数据
         */
        circle: function (data) {
            this.colorBorder = data.colorBorder
            this.colorFill = data.colorFill
            this.fill = data.fill
            switch (data.action) {
                case &#x27;mousedown&#x27;:
                    this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
                    this.lastImageData = this.context.getImageData(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
                    break
                case &#x27;mousemove&#x27;:
                    this.circleMousemove(data)
                    break
                case &#x27;mouseup&#x27;:
                    this.originPoint = null
                    this.lastImageData = null
                    this.allDataUrl.push(this.canvas.toDataURL())
                    this.pointer += 1
                    break
            }
        },
        /**
         * 当从服务器接收到的信息是画圆形操作，且鼠标事件为mousemove时调用。
         *
         * @method circleMousemove
         * @param data 从服务器接收的信息，包括对画板进行操作的数据
         */
        circleMousemove: function (data) {
            // TODO:拆分函数
            if (this.originPoint === null) {
                return
            }
            if (data.x &lt; MIN || data.x &gt; (1 - MIN) || data.y &lt; MIN || data.y &gt; (1 - MIN)) {
                this.originPoint = null
                this.lastImageData = null
                this.allDataUrl.push(this.canvas.toDataURL())
                this.pointer += 1
                return
            }
            const context = this.context
            context.putImageData(this.lastImageData, 0, 0)
            const [ox, oy] = this.originPoint
            const [dx, dy] = [data.x * this.teachingToolsWidth - ox, data.y * this.teachingToolsHeight - oy]
            const radius = Math.sqrt(dx * dx, dy * dy)
            context.lineWidth = this.size
            context.beginPath()
            context.arc((ox + data.x * this.teachingToolsWidth) / 2, (data.y * this.teachingToolsHeight + oy) / 2, radius, 0, 2 * Math.PI)
            if (this.fill === true) {
                context.fillStyle = this.colorFill
                context.fill()
            }
            if (this.border === true) {
                context.strokeStyle = this.colorBorder
                context.stroke()
            }
            context.closePath()
        },
        /**
         * 根据接收到的信息对画板进行画椭圆操作
         *
         * @method ellipse
         * @param data 从服务器接收到的信息，包含对画板操作的数据
         */
        ellipse: function (data) {
            this.colorBorder = data.colorBorder
            this.colorFill = data.colorFill
            this.fill = data.fill
            switch (data.action) {
                case &#x27;mousedown&#x27;:
                    this.originPoint = [data.x * this.teachingToolsWidth, data.y * this.teachingToolsHeight]
                    this.lastImageData = this.context.getImageData(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
                    break
                case &#x27;mousemove&#x27;:
                    this.ellipseMousemove(data)
                    break
                case &#x27;mouseup&#x27;:
                    this.originPoint = null
                    this.lastImageData = null
                    this.allDataUrl.push(this.canvas.toDataURL())
                    this.pointer += 1
                    break
            }
        },
        /**
         * 当从服务器接收到的信息是画椭圆操作，且鼠标事件为mousemove时调用。
         *
         * @method ellipseMousemove
         * @param data 从服务器接收的信息，包括对画板进行操作的数据
         */
        ellipseMousemove: function (data) {
            // TODO:拆分函数
            if (this.originPoint === null) {
                return
            }
            if (data.x &lt; MIN || data.x &gt; (1 - MIN) || data.y &lt; MIN || data.y &gt; (1 - MIN)) {
                this.originPoint = null
                this.lastImageData = null
                this.allDataUrl.push(this.canvas.toDataURL())
                this.pointer += 1
                return
            }
            const context = this.context
            context.putImageData(this.lastImageData, 0, 0)
            const [ox, oy] = this.originPoint
            const [dx, dy] = [Math.abs(data.x * this.teachingToolsWidth - ox), Math.abs(data.y * this.teachingToolsHeight - oy)]
            context.strokeStyle = this.colorBorder
            context.lineWidth = this.size
            if (this.fill === true) {
                context.fillStyle = this.colorFill
            }
            context.beginPath()
            context.ellipse((data.x * this.teachingToolsWidth + ox) / 2, (data.y * this.teachingToolsHeight + oy) / 2, dx / 2, dy / 2, 0, 0, 2 * Math.PI)
            if (this.fill === true) {
                context.fillStyle = this.colorFill
                context.fill()
            }
            if (this.border === true) {
                context.strokeStyle = this.colorBorder
                context.stroke()
            }
            context.closePath()
        },
        /**
         * 在&#x27;whiteBoardDoing&#x27;函数中调用，
         * 接收到服务器消息后清空画板
         *
         * @method boardClear
         * @param data 从服务器接收到的数据，包含&quot;清空&quot;信息
         */
        boardClear: function (data) {
            this.context.clearRect(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
            this.allDataUrl = []
            this.allDataUrl.push(this.canvas.toDataURL())
            this.pointer = 0
        },
        /**
         * 在&#x27;whiteBoardDoing&#x27;函数中调用，
         * 根据服务器传来的信息更新自己的数据，
         * 同步到老师端。
         *
         * @method textBox
         * @param data 从服务器接收到的数据，包含文字坐标、颜色等信息
         */
        textBox: function (data) {
            if (data.action === &#x27;mouseup&#x27;) {
                this.textLeft = data.x * this.teachingToolsWidth
                this.textTop = data.y * this.teachingToolsHeight
                this.colorBorder = data.color
            }
        },
        /**
         * 在&#x27;whiteBoardDoing&#x27;函数中调用，
         * 将指定文本内容画到画板上
         *
         * @method font
         * @param data 从服务器接收到的数据，包含文本内容等信息
         */
        font: function (data) {
            this.textField = false
            this.context.font = (this.size * 5 + 25) + &#x27;px serif&#x27;
            this.context.fillStyle = this.colorBorder
            this.drawLongText(data.input, this.textLeft, this.textTop)
            this.textInput = &#x27;&#x27;
            this.allDataUrl.push(this.canvas.toDataURL())
            this.pointer += 1
        },
        /**
         * 在&#x27;whiteBoardDoing&#x27;函数中调用，
         * 接收到服务器端的信息后，执行undo操作
         *
         * @method boardUndo
         */
        boardUndo: function () {
            if (this.started === false) {
                return
            }
            if (this.pointer === 0) {
                this.$Message.error(myMsg.whiteBoard[&#x27;undoNotExist&#x27;])
                return
            } else {
                this.pointer -= 1
                this.context.clearRect(0, 0, this.teachingToolsWidth, this.teachingToolsHeight)
                this.drawDataUrl(this.allDataUrl[this.pointer])
                this.allDataUrl.length = this.pointer + 1
            }
        },
        /**
         * 当用户接收到&#x27;message&#x27;消息时，对画板进行绘图操作
         *
         * @method whiteBoardDoing
         * @param data 从服务器接收到的信息，包括在画板上操作的坐标、颜色、形状等信息
         */
        whiteBoardDoing: function (data) {
            if (data.type === &#x27;pen&#x27;) {
                this.pen(data)
            } else if (data.type === &#x27;eraser&#x27;) {
                this.eraser(data)
            } else if (data.type === &#x27;line&#x27;) {
                this.line(data)
            } else if (data.type === &#x27;rectangle&#x27;) {
                this.rectangle(data)
            } else if (data.type === &#x27;circle&#x27;) {
                this.circle(data)
            } else if (data.type === &#x27;ellipse&#x27;) {
                this.ellipse(data)
            } else if (data.type === &#x27;clear&#x27;) {
                this.boardClear(data)
            } else if (data.type === &#x27;textField&#x27;) {
                this.textBox(data)
            } else if (data.type === &#x27;drawText&#x27;) {
                this.font(data)
            } else if (data.type === &#x27;undo&#x27;) {
                this.boardUndo()
            }
        },
        /**
         * 用户在开始直播后接收到&#x27;click&#x27;消息后，
         * 根据传输数据的类型，改变相应属性，完成点击按钮事件的响应。
         *
         * @method buttonDoing
         * @param data 从服务器端接收到的信息，包括点击的按钮类型
         */
        buttonDoing: function (data) {
            if (data.type === &#x27;eraser&#x27;) {
                this.type = &#x27;eraser&#x27;
            } else if (data.type === &#x27;pen&#x27;) {
                this.type = &#x27;pen&#x27;
            } else if (data.type === &#x27;text&#x27;) {
                this.type = &#x27;text&#x27;
            } else if (data.type === &#x27;line&#x27;) {
                this.type = &#x27;line&#x27;
            } else if (data.type === &#x27;rectangle&#x27;) {
                this.type = &#x27;rectangle&#x27;
            } else if (data.type === &#x27;circle&#x27;) {
                this.type = &#x27;circle&#x27;
            } else if (data.type === &#x27;ellipse&#x27;) {
                this.type = &#x27;ellipse&#x27;
            } else if (data.type === &#x27;border&#x27;) {
                this.border = !this.border
            } else if (data.type === &#x27;fill&#x27;) {
                this.fill = !this.fill
            } else if (data.type === &#x27;sizeLarge&#x27;) {
                this.size = 5
            } else if (data.type === &#x27;sizeMiddle&#x27;) {
                this.size = 3
            } else if (data.type === &#x27;sizeSmall&#x27;) {
                this.size = 1
            }
        },
        /**
         * 当用户（创建房间的老师）接收到&#x27;newJoin&#x27;消息时调用，
         * 老师直播过程中有新的用户进入房间，
         * 老师就把自己对白板操作的信息都发送到服务器，
         * 以达到学生同步的目的。
         *
         * @method joinDoing
         */
        joinDoing: function () {
            if (this.teacherName !== this.username) {
                return
            }
            this.socket.emit(&#x27;newJoinWhiteBoardMessage&#x27;, {
                type: this.type,
                border: this.border,
                fill: this.fill,
                size: this.size,
                dataUrl: this.allDataUrl
            }, this.roomId + &#x27;.0&#x27;)
        },
        /**
         * 当用户接收到&#x27;updateWhiteBoardMessage&#x27;消息时调用
         * （老师直播过程中有新的用户进入房间），
         * 将自己的信息同步到老师端
         *
         * @method updateMessageDoing
         * @param data 从服务器接收的信息，包括老师端对画板操作的所有信息
         */
        updateMessageDoing: function (data) {
            if (this.teacherName !== this.username) {
                this.allDataUrl = data.dataUrl
                this.type = data.type
                this.border = this.border
                this.fill = data.fill
                this.size = data.size
                this.pointer = this.allDataUrl.length - 1
                this.drawDataUrl(this.allDataUrl[this.pointer])
            }
        },
        /**
         * 将指定dataURL画到canvas上
         *
         * @method drawDataUrl
         * @param dataUrl 将要画到canvas上的base64编码的图形对象
         */
        drawDataUrl: function (dataUrl) {
            let img = new Image()
            let that = this
            img.onload = function () {
                that.context.drawImage(img, 0, 0, that.teachingToolsWidth, that.teachingToolsHeight)
            }
            img.src = dataUrl
        }
    }
}
&lt;/script&gt;

&lt;style scoped&gt;
#text-field {
    position: absolute;
    width: 300px;
}

.white-board {
    height: 100%;
    display: flex;
    cursor: hand;
}

.tools {
    height: auto;
    width: 85px;
    background: #efefef;
}

button {
    background-color: #efefef;
    height: 30px;
    width: 74px;
    margin-left: 0;
    margin-right: 0;
}

button.active {
    background-color: #aaa;
}

.color-selected {
    margin-left: 8px;
}

.drawing-board {
    height: 100%;
    width: 100%;
}
&lt;/style&gt;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
